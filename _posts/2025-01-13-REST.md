---
title: REST
date: 2025-01-13 21:51:31 +0100
categories: [REST, WebAPI]
tags: [REST, WebAPI]
---

“What we want is rest,” said Harris.  

“Rest and a complete change,” said George. “The overstrain upon our  
brains has produced a general depression throughout the system. Change  
of scene, and absence of the necessity for thought, will restore the  
mental equilibrium.”  

Short glossary: <https://developer.mozilla.org/en-US/docs/Glossary/REST>

1. Test sites that are used in dotnet docs snippets. For example <https://github.com/dotnet/docs/blob/main/docs/fundamentals/networking/telemetry/snippets/metrics/Program.cs>, etc

	- <https://httpbin.org>   
	- <https://github.com/postmanlabs/httpbin> 
	- <https://jsonplaceholder.typicode.com>



2. Constraints <https://martinfowler.com/articles/richardsonMaturityModel.html>
	- Uniform Interface
	- Client-Server
	- Stateless
	- Chacheable


3. API example
	- Twitter: <https://developer.twitter.com/en/docs/api-reference-index>
	- Facebook: <https://developers.facebook.com/docs/reference/api/>
	- LinkedIn: <https://developer.linkedin.com/apis>
	- Github:   <https://api.github.com/>
	
4. Headers <https://en.wikipedia.org/wiki/List_of_HTTP_header_fields>
	
5. Responce status codes <https://developer.mozilla.org/en-US/docs/Web/HTTP/Status>

	```txt
	100 Continue
	101 Switching Protocols
	103 Early Hints
	
	200 OK
	201 Created
	202 Accepted
	203 Non-Authoritative Information
	204 No Content
	205 Reset Content
	206 Partial Content
	
	300 Multiple Choices
	301 Moved Permanently
	302 Found
	303 See Other
	304 Not Modified
	307 Temporary Redirect
	308 Permanent Redirect
	
	400 Bad Request
	401 Unauthorized
	402 Payment Required
	403 Forbidden
	404 Not Found
	405 Method Not Allowed /*ask by get , server have only post*/
	406 Not Acceptable /*request ask xml, server can take json*/
	407 Proxy Authentication Required
	408 Request Timeout
	409 Conflict  /* resource in proccess of renovation */
	410 Gone
	411 Length Required
	412 Precondition Failed
	413 Payload Too Large
	414 URI Too Long
	415 Unsupported Media Type
	416 Range Not Satisfiable
	417 Expectation Failed
	418 I'm a teapot
	422 Unprocessable Entity /*server don't understand */
	425 Too Early
	426 Upgrade Required
	428 Precondition Required
	429 Too Many Requests
	431 Request Header Fields Too Large
	451 Unavailable For Legal Reasons
	
	500 Internal Server Error
	501 Not Implemented
	502 Bad Gateway
	503 Service Unavailable
	504 Gateway Timeout
	505 HTTP Version Not Supported
	506 Variant Also Negotiates
	507 Insufficient Storage
	508 Loop Detected
	510 Not Extended
	511 Network Authentication Required
		
	```	
	
General principles for good URI design:

- Don't use query parameters to alter state
- Don't use mixed-case paths if you can help it; lowercase is best
- Don't use implementation-specific extensions in your URIs (.php, .py, .pl, etc.)
- Don't fall into RPC with your URIs
- Do limit your URI space as much as possible
- Do keep path segments short
- Do prefer either /resource or /resource/; create 301 redirects from the one you don't use
- Do use query parameters for sub-selection of a resource; i.e. pagination, search queries
- Do move stuff out of the URI that should be in an HTTP header or a body
(Note: I did not say "RESTful URI design"; URIs are essentially opaque in REST.)

General principles for HTTP method choice:  

- Don't ever use GET to alter state; this is a great way to have the Googlebot ruin your day
- Don't use PUT unless you are updating an entire resource
- Don't use PUT unless you can also legitimately do a GET on the same URI
- Don't use POST to retrieve information that is long-lived or that might be reasonable to cache
- Don't perform an operation that is not idempotent with PUT
- Do use GET for as much as possible
- Do use POST in preference to PUT when in doubt
- Do use POST whenever you have to do something that feels RPC-like
- Do use PUT for classes of resources that are larger or hierarchical
- Do use DELETE in preference to POST to remove resources
- Do use GET for things like calculations, unless your input is large, in which case use POST
 
General principles of web service design with HTTP:

- Don't put metadata in the body of a response that should be in a header
- Don't put metadata in a separate resource unless including it would create significant overhead
- Do use the appropriate status code
- 201 Created after creating a resource; resource must exist at the time the response is sent
- 202 Accepted after performing an operation successfully or creating a resource asynchronously
- 400 Bad Request when someone does an operation on data that's clearly bogus; for your application this could be a validation error; generally reserve 500 for uncaught exceptions
- 401 Unauthorized when someone accesses your API either without supplying a necessary Authorization header or when the credentials within the Authorization are invalid; don't use this response code if you aren't expecting credentials via an Authorization header.
- 403 Forbidden when someone accesses your API in a way that might be malicious or if they aren't authorized
- 405 Method Not Allowed when someone uses POST when they should have used PUT, etc
- 413 Request Entity Too Large when someone attempts to send you an unacceptably large file
- 418 I'm a teapot when attempting to brew coffee with a teapot
- Do use caching headers whenever you can
- ETag headers are good when you can easily reduce a resource to a hash value
- Last-Modified should indicate to you that keeping around a timestamp of when resources are updated is a good idea
- Cache-Control and Expires should be given sensible values
- Do everything you can to honor caching headers in a request (If-None-Modified, If-Modified-Since)
- Do use redirects when they make sense, but these should be rare for a web service With regard to your specific question, POST should be used for #4 and #5. These operations fall under the "RPC-like" guideline above. For #5, remember that POST does not necessarily have to use Content-Type: application/x-www-form-urlencoded. This could just as easily be a JSON or CSV payload.